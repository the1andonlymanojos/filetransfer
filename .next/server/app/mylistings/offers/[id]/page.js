(()=>{var e={};e.id=630,e.ids=[630],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},7147:e=>{"use strict";e.exports=require("fs")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},9991:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var i=t(482),a=t(9108),l=t(2563),n=t.n(l),r=t(8300),o={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>r[e]);t.d(s,o);let c=["",{children:["mylistings",{children:["offers",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1237)),"/Users/manojos/WebstormProjects/cexchange/src/app/mylistings/offers/[id]/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,2607)),"/Users/manojos/WebstormProjects/cexchange/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/manojos/WebstormProjects/cexchange/src/app/mylistings/offers/[id]/page.tsx"],u="/mylistings/offers/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/mylistings/offers/[id]/page",pathname:"/mylistings/offers/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8850:(e,s,t)=>{Promise.resolve().then(t.bind(t,4957))},1532:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t(9224).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},4957:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var i=t(5344),a=t(3729),l=t(9769),n=t(8428),r=t(6887),o=t(677),c=t(5094),d=t(1532);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,t(9224).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var x=t(4513),h=t(2032),m=t(6124),f=t(6335);let p=({listingId:e})=>{(0,n.useRouter)();let[s,t]=(0,a.useState)(""),o=`${r.y}api/questions/${e}`;console.log(o);let[c,d]=(0,a.useState)([]);(0,l.pm)();let u=async e=>{let s=await fetch(o,{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json"}}),t=await s.json();200!==s.status&&(console.log("failed to fetch"),console.log(s.status),console.log(await s.json())),console.log(t),d(t.questions.filter(e=>!e.answered))};return(0,a.useEffect)(()=>{u(e)},[]),i.jsx(i.Fragment,{children:(0,i.jsxs)("div",{className:"relative bg-white rounded-lg p-4 mb-1 w-full",children:[i.jsx("div",{className:"text-xl font-thin absolute top-2 left-7",children:"QnA"}),i.jsx("div",{className:"bg-white rounded-lg p-2 mb-1 mt-4 w-full max-h-[300px] overflow-y-scroll",children:i.jsx(f.Z,{withansbox:!0,questions:c})}),i.jsx("div",{className:"text-xs font-thin absolute bottom-1 left-4",children:"scroll for more"})]})})},g=({params:e})=>{console.log(e.id);let s=Number.parseInt(e.id),t=`${r.y}api/listings/offers/${e.id}`,[f,g]=(0,a.useState)([]),[j,y]=(0,a.useState)(null),[v,b]=(0,a.useState)(!0),[w,N]=(0,a.useState)(!1),[k,P]=(0,a.useState)(!0),{toast:C}=(0,l.pm)(),_=(0,n.useRouter)(),q=(0,a.useRef)(null),S=async()=>{let e=await fetch(t,{method:"GET",cache:"no-cache",credentials:"include"});if(200!==e.status&&401!==e.status&&N(!0),401===e.status){P(!1),C({title:"Uh Oh!",description:"Looks like you are not logged in, please to check offers"}),_.push(`/login?redirect=${window.location.pathname}`);return}let s=await e.json();if(console.log(s),"available"!==s.listing.availability){let e=s.offers.find(e=>1===e.accepted);e&&_.push(`/transactions/${e.transaction_id}`);return}if(s.offers){for(let e of s.offers){let s=Date.parse(e.expires_at)-Date.now();console.log(s);let t=Math.floor(s/864e5),i=Math.floor(s%864e5/36e5)+24*t;i>0?e.timeLeft=i:e.timeLeft=-1}g(s.offers),b(!1),y(s.listing),console.log(f)}s.listing&&(y(s.listing),b(!1))};return(0,a.useEffect)(()=>{S()},[]),i.jsx("div",{className:"flex-row flex justify-center",children:i.jsx("div",{className:"max-w-md w-[100vw]",children:(0,i.jsxs)("div",{className:"",children:[(0,i.jsxs)("div",{className:"flex fex-row justify-start items-center",onClick:e=>{_.push("/mylistings")},children:[i.jsx(d.Z,{className:""}),i.jsx("h1",{className:"text-2xl p-2",children:"My Listings"})]}),(0,i.jsxs)("div",{className:"flex flex-row justify-start bg-gray-100 p-1 rounded-md shadow items-center",onClick:e=>{_.push(`/listing/${j?.id}`)},children:[i.jsx("img",{src:`${r.y}`+j?.image_path,className:"w-24 h-24  object-cover rounded-2xl p-2  mr-2",alt:"thumbnail"}),(0,i.jsxs)("div",{className:"flex flex-row justify-between w-full",children:[i.jsx("div",{className:"text-xl",children:j?.title}),(0,i.jsxs)("div",{className:"flex flex-row justify-end text-xs ",children:["Highest bid:",i.jsx("br",{}),j?.highest_bid?j.highest_bid:"No offers yet"]})]})]}),(0,i.jsxs)(m.UQ,{type:"single",children:[(0,i.jsxs)(m.Qd,{value:"value-11",children:[i.jsx(m.o4,{children:" OFFERS: "}),(0,i.jsxs)(m.vF,{children:[i.jsx("div",{className:"m-2 text-lg",children:"Offers:"}),(0,i.jsxs)("div",{className:"m-2 text-base flex flex-col items-center justify-center",children:[0===f.length?i.jsx("div",{children:"No offers yet"}):null,v?i.jsx("div",{children:"Loading..."}):null]}),i.jsx("div",{children:f.map((e,s)=>i.jsx("div",{className:"w-full rounded-xl p-2 "+(null===e.accepted?"bg-gray-100":1===e.accepted?"bg-green-50":"bg-red-50"),children:(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center flex-nowrap",children:[(0,i.jsxs)("h1",{children:[" Anonymous",i.jsx("br",{})," User"]}),(0,i.jsxs)("div",{className:"flex flex-col text-sm items-end",children:[i.jsx("div",{children:"Bid Amount"}),(0,i.jsxs)("div",{children:["₹",e.amount]})]}),(0,i.jsxs)("div",{className:"flex text-sm flex-col items-end",children:[i.jsx("div",{children:"Time Left"}),i.jsx("div",{children:e.timeLeft>0?e.timeLeft+" hours":"Expired"})]}),i.jsx("div",{children:(0,i.jsxs)("div",{className:"flex flex-col mr-3 justify-center items-center",children:[(0,i.jsxs)(o.dy,{children:[i.jsx(o.Qz,{asChild:!0,children:i.jsx(c.z,{variant:"outline",size:"icon",className:"h-8 w-8 bg-green-300 shrink-0 rounded-full",disabled:null!==e.accepted,children:i.jsx(u,{})})}),i.jsx(o.sc,{children:(0,i.jsxs)("div",{className:"mx-auto w-full max-w-sm",children:[(0,i.jsxs)(o.OX,{children:[i.jsx(o.iI,{children:"Are you absolutely sure?"}),(0,i.jsxs)(o.u6,{children:["This action cannot be undone. By clicking accept you agree to the bid of ₹",e.amount,". Failure to blah blah blah boilerplate"]})]}),(0,i.jsxs)(o.ze,{children:[i.jsx(c.z,{className:"bg-green-800",onClick:async s=>{let t=`${r.y}api/offers/respond/${e.id}`,a=await fetch(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({response:"accept"})}),l=await a.json();console.log(l),console.log("here"),200!==a.status?C({title:"Uh Oh!",variant:"destructive",description:"Failed to accept bid "+l.message}):(C({title:"Success",description:"Bid accepted",action:i.jsx(h.gD,{altText:"go to transaction page",onClick:()=>{console.log("going to transaction page")},children:"Open Transaction Page"})}),_.push(`/transactions/${l.transaction_id}`)),q.current.click()},children:"Accept Bid"}),i.jsx(o.uh,{asChild:!0,children:i.jsx(c.z,{ref:q,variant:"outline",children:"Cancel"})})]})]})})]}),(0,i.jsxs)(o.dy,{children:[i.jsx(o.Qz,{asChild:!0,children:i.jsx(c.z,{variant:"outline",size:"icon",className:"h-8 w-8 bg-red-300 shrink-0 rounded-full",disabled:null!==e.accepted,children:i.jsx(x.Z,{strokeWidth:1.25})})}),i.jsx(o.sc,{children:(0,i.jsxs)("div",{className:"mx-auto w-full max-w-sm",children:[(0,i.jsxs)(o.OX,{children:[i.jsx(o.iI,{children:"Are you absolutely sure?"}),(0,i.jsxs)(o.u6,{children:["This action cannot be undone. By clicking reject you are rejecting the bid of ₹",e.amount,". Failure to blah blah blah boilerplate"]})]}),(0,i.jsxs)(o.ze,{children:[i.jsx(c.z,{className:"bg-red-800",onClick:async s=>{let t=`${r.y}api/offers/respond/${e.id}`,i=await fetch(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({response:"reject"})}),a=await i.json();console.log(a),console.log("here"),200!==i.status?C({title:"Uh Oh!",variant:"destructive",description:"Failed to reject bid "+a.message}):C({title:"Success",description:"Bid rejected"}),q.current.click()},children:"Reject Bid"}),i.jsx(o.uh,{asChild:!0,children:i.jsx(c.z,{ref:q,variant:"outline",children:"Cancel"})})]})]})})]})]})})]})},e.id))})]})]}),(0,i.jsxs)(m.Qd,{value:"value-12",children:[i.jsx(m.o4,{children:"Unanswered Questions"}),i.jsx(m.vF,{children:i.jsx(p,{listingId:s})})]})]})]})})})}},6335:(e,s,t)=>{"use strict";t.d(s,{Z:()=>o});var i=t(5344),a=t(6637),l=t(6124),n=t(5094),r=t(6887);let o=({questions:e,withansbox:s})=>i.jsx("div",{children:i.jsx(l.UQ,{type:s?"single":"multiple",defaultChecked:!1,children:e.map((e,t)=>(0,i.jsxs)(l.Qd,{value:"item "+t,children:[i.jsx(l.o4,{children:e.question}),i.jsx(l.vF,{children:e.answered?e.answer:s?i.jsx(i.Fragment,{children:(0,i.jsxs)("div",{className:"p-1 m-1",children:[i.jsx(a.Z,{label:"Answer",type:"text",onChange:e=>{},id:"afsdfasd"+t}),i.jsx(n.z,{onClick:s=>{let i=document.getElementById("afsdfasd"+t).value;console.log(i);let a=`${r.y}api/questions/answer/${e.id}`;fetch(a,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:i})}).then(s=>{200===s.status?(console.log("success"),e.answer=i,e.answered=!0):console.log("failed")})},className:"bg-gray-100 text-black font-thin",children:"Submit Answer"})]})}):"Not answered yet"})]},t))})})},677:(e,s,t)=>{"use strict";t.d(s,{OX:()=>h,Qz:()=>o,dy:()=>r,iI:()=>f,sc:()=>x,u6:()=>p,uh:()=>d,ze:()=>m});var i=t(5344),a=t(3729),l=t(4885),n=t(1453);let r=({shouldScaleBackground:e=!0,...s})=>i.jsx(l.d.Root,{shouldScaleBackground:e,...s});r.displayName="Drawer";let o=l.d.Trigger,c=l.d.Portal,d=l.d.Close,u=a.forwardRef(({className:e,...s},t)=>i.jsx(l.d.Overlay,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80",e),...s}));u.displayName=l.d.Overlay.displayName;let x=a.forwardRef(({className:e,children:s,...t},a)=>(0,i.jsxs)(c,{children:[i.jsx(u,{}),(0,i.jsxs)(l.d.Content,{ref:a,className:(0,n.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...t,children:[i.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),s]})]}));x.displayName="DrawerContent";let h=({className:e,...s})=>i.jsx("div",{className:(0,n.cn)("grid gap-1.5 p-4 text-center sm:text-left",e),...s});h.displayName="DrawerHeader";let m=({className:e,...s})=>i.jsx("div",{className:(0,n.cn)("mt-auto flex flex-col gap-2 p-4",e),...s});m.displayName="DrawerFooter";let f=a.forwardRef(({className:e,...s},t)=>i.jsx(l.d.Title,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));f.displayName=l.d.Title.displayName;let p=a.forwardRef(({className:e,...s},t)=>i.jsx(l.d.Description,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));p.displayName=l.d.Description.displayName},6887:(e,s,t)=>{"use strict";t.d(s,{y:()=>i});let i="https://manojshivagange.tech:3000/"},1237:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});let i=(0,t(6843).createProxy)(String.raw`/Users/manojos/WebstormProjects/cexchange/src/app/mylistings/offers/[id]/page.tsx`),{__esModule:a,$$typeof:l}=i,n=i.default},3881:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var i=t(337);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,i.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),i=s.X(0,[638,313,337,885,621],()=>t(9991));module.exports=i})();